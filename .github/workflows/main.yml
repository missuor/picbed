# name: Sync Repo
# on:
#   push:

# jobs:
#   build:
#     runs-on: ubuntu-latest
#     steps:
#     - name: test
#       uses: actions/checkout@v3
#     - name: test2
#       run: echo Hello, world!

#     - name: Run a multi-line script
#       run: |
#         echo Add other actions to build,
#         echo test, and deploy your project.

#     - name: Sync Repo
#       uses: serverlesslife-cn/sync-repo-to-coding@master
#       env:
#           SSH_PRIVATE_KEY: ${{ secrets.ID_RSA_FOR_CODE_SYNC_IN_GITHUB }}
#       with:
#           github-repo: "git@github.com:missuor/picbed.git"
#           coding-repo: "git@github.com:missuor/notes.git"




name: Sync static branch to repository A

on:
  push:
    branches:
      - static

jobs:
  sync:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository B
        uses: actions/checkout@v2

      - name: Push to repository A
        env:
          SSH_PRIVATE_KEY: ${{ secrets.ID_RSA_FOR_CODE_SYNC_IN_GITHUB }}
        run: |
          mkdir -p ~/.ssh
          echo "$SSH_PRIVATE_KEY" > ~/.ssh/id_rsa
          chmod 600 ~/.ssh/id_rsa
          # git config --global user.name "GitHub Actions"
          # git config --global user.email "actions@github.com"
          git clone --branch static --single-branch git@github.com:missuor/picbed.git b
          cd b
          git remote add a git@github.com:missuor/notes.git
          git push a static:master
      

